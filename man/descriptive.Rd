% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/descriptive.R
\name{descriptive}
\alias{descriptive}
\title{Descriptive Decomposition Analysis (Sequential or Simultaneous)}
\usage{
descriptive(
  data,
  y,
  r,
  x,
  weight.var = NULL,
  estimator = "ri",
  learner = c("SL.mean", "SL.glm", "SL.ranger"),
  type = "sequential",
  outcome.type = "binary",
  B = 250,
  K = 5
)
}
\arguments{
\item{data}{A data frame. Each data set must include the variables specified in y, r, and x.}

\item{y}{The outcome variable (a character string).}

\item{r}{The group indicator variable (binary only; a character string).}

\item{x}{Either an ORDERED character vector (each element is treated as one stage) or an ORDERED list of character vectors.
In the sequential decomposition, the stages are built sequentially.}

\item{weight.var}{(Optional) A character string giving the name of the survey weight variable.
If not provided, all observations receive equal weight.}

\item{estimator}{A character string specifying the estimator to use. Options are "ri" (regression imputation, by linear or logistic regression),
"w" (weighting, by logistic regression), "dr" (doubly robust), or "dml" (double machine learning). Default is "ri".}

\item{learner}{For the DML estimator only: a character vector of SuperLearner library functions. Default is c("SL.mean", "SL.glmnet", "SL.ranger").}

\item{type}{A character string indicating the decomposition type: either "sequential" (the default) or "simultaneous".}

\item{outcome.type}{A character string indicating the type of outcome: either "binary" (logistic regression) or "continuous" (linear regression). Default is "binary".}

\item{B}{For non-DML estimators, the number of bootstrap iterations (default is 250).}

\item{K}{For the DML estimator, the number of cross-fitting folds (default is 5).}
}
\value{
A tibble with the estimated contributions and their standard errors. For a sequential decomposition,
  one row is provided for each stage (and one for the total explained gap). For a simultaneous decomposition with
  \code{estimator = "ri"}, additional rows for individual covariate contributions and the unexplained component are included;
  for other estimators ("w", "dr", or "dml"), only the total explained part is reported.
}
\description{
This function implements a decomposition analysis of group differences in an outcome
using either a sequential decomposition or a simultaneous (Oaxaca–Blinder)
decomposition. The user supplies covariates via x (which may be a character vector or an ordered list of character vectors).
}
\details{
When \code{type = "sequential"}, the decomposition is carried out in a sequential fashion:
stage 1 uses x[[1]], stage 2 uses c(x[[1]], x[[2]]), etc. For each stage the contribution
is computed (with bootstrap standard errors) using the chosen estimator ("ri", "w", "dr",
or "dml").

When \code{type = "simultaneous"}, a standard Oaxaca–Blinder (or KOB) decomposition is performed.
With the default \code{estimator = "ri"}, a full decomposition is obtained—that is, the individual contributions
of each covariate (based on a linear regression fitted among group r) are reported, along with the total explained
and unexplained portions. When any other estimator is selected ("w", "dr", or "dml"), only the total explained
proportion is computed, as detailed decomposition is not available.
}
\examples{
\dontrun{
  # Sequential decomposition: each covariate is added in order (non-DML)
  res_seq <- descriptive(data = mydata, y = "comp", r = "black", x = c("age", "female", "parinc"),
                         weight.var = "weight", estimator = "ri", type = "sequential")

  # Sequential decomposition using DML:
  res_seq_dml <- descriptive(data = mydata, y = "comp", r = "black", x = c("age", "female", "parinc"),
                             weight.var = "weight", estimator = "dml", type = "sequential")

  # Simultaneous decomposition (Oaxaca-Blinder) with RI estimator:
  res_sim <- descriptive(data = mydata, y = "comp", r = "black", x = c("age", "female", "parinc"),
                         weight.var = "weight", estimator = "ri", type = "simultaneous")

  # Simultaneous decomposition with a DR estimator:
  res_sim_dr <- descriptive(data = mydata, y = "comp", r = "black", x = c("age", "female", "parinc"),
                            weight.var = "weight", estimator = "dr", type = "simultaneous")

  # Simultaneous decomposition with a DML estimator:
  res_sim_dml <- descriptive(data = mydata, y = "comp", r = "black", x = c("age", "female", "parinc"),
                             weight.var = "weight", estimator = "dml", type = "simultaneous")
}

}
